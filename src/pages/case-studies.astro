---
// src/pages/debug-files.astro
import { getCollection } from 'astro:content'
import DefaultLayout from '@layouts/DefaultLayout.astro'

let caseStudies = []
let projects = []
let error = null

try {
  projects = await getCollection('projects')
  caseStudies = await getCollection('casestudies')
  
  console.log('Projects found:', projects.length)
  console.log('Case studies found:', caseStudies.length)
  
  // Zeige Details der ersten EintrÃ¤ge
  if (projects.length > 0) {
    console.log('First project:', projects[0])
  }
  if (caseStudies.length > 0) {
    console.log('First case study:', caseStudies[0])
  }
  
} catch (e) {
  error = e
  console.error('Full error:', e)
}
---

<DefaultLayout title="File Debug">
  <h1>File Debug</h1>
  
  {error ? (
    <div>
      <p>Error: {error.message}</p>
      <pre>{error.stack}</pre>
    </div>
  ) : (
    <div>
      <h2>Projects ({projects.length}):</h2>
      {projects.map(project => (
        <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
          <h3>{project.data.title}</h3>
          <p>Author: {project.data.author}</p>
          <p>ID: {project.id}</p>
        </div>
      ))}
      
      <h2>Case Studies ({caseStudies.length}):</h2>
      {caseStudies.map(study => (
        <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
          <h3>{study.data.title}</h3>
          <p>Description: {study.data.description}</p>
          <p>ID: {study.id}</p>
        </div>
      ))}
    </div>
  )}
</DefaultLayout>